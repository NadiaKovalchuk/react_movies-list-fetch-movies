(this["webpackJsonpreact_movies-list-fetch-movies"]=this["webpackJsonpreact_movies-list-fetch-movies"]||[]).push([[0],{16:function(e,t,c){},17:function(e,t,c){},18:function(e,t,c){},21:function(e,t,c){},22:function(e,t,c){"use strict";c.r(t);var i=c(8),n=c.n(i),a=(c(15),c(16),c(1)),s=(c(17),c(18),c(0)),r=function(e){var t=e.movie;return Object(s.jsxs)("div",{className:"card","data-cy":"movieCard",children:[Object(s.jsx)("div",{className:"card-image",children:Object(s.jsx)("figure",{className:"image is-4by3",children:Object(s.jsx)("img",{"data-cy":"moviePoster",src:t.imgUrl,alt:"Film logo"})})}),Object(s.jsxs)("div",{className:"card-content",children:[Object(s.jsxs)("div",{className:"media",children:[Object(s.jsx)("div",{className:"media-left",children:Object(s.jsx)("figure",{className:"image is-48x48",children:Object(s.jsx)("img",{src:"images/imdb-logo.jpeg",alt:"imdb"})})}),Object(s.jsx)("div",{className:"media-content",children:Object(s.jsx)("p",{className:"title is-8","data-cy":"movieTitle",children:t.title})})]}),Object(s.jsxs)("div",{className:"content","data-cy":"movieDescription",children:[t.description,Object(s.jsx)("br",{}),Object(s.jsx)("a",{href:t.imdbUrl,"data-cy":"movieURL",children:"IMDB"})]})]})]})},o=c(10),l=c(9),d=c(2),u=c(6),j=c.n(u),m="https://www.omdbapi.com/?apikey=".concat("66e4f507");var b=Object(a.createContext)({movie:null,inputValue:"",changeInputValue:function(){},isLoadingMovie:!1,isError:!1,searchMovie:function(){},reset:function(){},addMovie:function(){},movies:[]}),v=function(e){var t=e.children,c=Object(a.useState)(null),i=Object(d.a)(c,2),n=i[0],r=i[1],u=Object(a.useState)(""),v=Object(d.a)(u,2),h=v[0],O=v[1],p=Object(a.useState)(!1),x=Object(d.a)(p,2),f=x[0],g=x[1],N=Object(a.useState)(!1),y=Object(d.a)(N,2),w=y[0],M=y[1],I=Object(a.useState)([]),C=Object(d.a)(I,2),k=C[0],E=C[1],P=function(){var e=Object(l.a)(j.a.mark((function e(t){var c,i,n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,e.next=4,s=t,fetch("".concat(m,"&t=").concat(s)).then((function(e){return e.json()})).catch((function(){return{Response:"False",Error:"unexpected error"}}));case 4:if(!(c=e.sent).hasOwnProperty("Error")){e.next=8;break}return M(!0),e.abrupt("return");case 8:n="N/A"!==(i=c).Poster?i.Poster:"https://via.placeholder.com/360x270.png?text=no%20preview",a="https://www.imdb.com/title/".concat(i.imdbID),r({title:i.Title,description:i.Plot,imgUrl:n,imdbUrl:a,imdbId:i.imdbID}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),M(!0);case 17:return e.prev=17,g(!1),e.finish(17);case 20:case"end":return e.stop()}var s}),e,null,[[1,14,17,20]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){O(""),r(null)},S={movie:n,inputValue:h,changeInputValue:function(e){M(!1),O(e)},isLoadingMovie:f,isError:w,searchMovie:P,reset:F,movies:k,addMovie:function(e){E((function(t){return t.some((function(t){return t.imdbId===e.imdbId}))?t:[].concat(Object(o.a)(t),[e])})),F()}};return Object(s.jsx)(b.Provider,{value:S,children:t})},h=function(){var e=Object(a.useContext)(b).movies;return Object(s.jsx)("div",{className:"movies",children:e.map((function(e){return Object(s.jsx)(r,{movie:e},e.imdbId)}))})},O=(c(21),c(7)),p=c.n(O),x=function(){var e=Object(a.useContext)(b),t=e.inputValue,c=e.changeInputValue,i=e.isLoadingMovie,n=e.isError,o=e.searchMovie,l=e.movie,d=e.reset,u=e.addMovie;console.log(i,n);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("form",{className:"find-movie",onSubmit:function(e){return function(e){e.preventDefault(),o(t),d()}(e)},children:[Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{className:"label",htmlFor:"movie-title",children:"Movie title"}),Object(s.jsx)("div",{className:"control",children:Object(s.jsx)("input",{"data-cy":"titleField",type:"text",id:"movie-title",placeholder:"Enter a title to search",className:p()({input:!0,"is-danger":n}),value:t,onChange:function(e){return c(e.target.value)}})}),n&&Object(s.jsx)("p",{className:"help is-danger","data-cy":"errorMessage",children:"Can't find a movie with such a title"})]}),Object(s.jsxs)("div",{className:"field is-grouped",children:[Object(s.jsx)("div",{className:"control",children:Object(s.jsx)("button",{"data-cy":"searchButton",type:"submit",className:p()({"button is-light":!i,"button is-light is-loading":i}),disabled:!t,children:"Find a movie"})}),l&&Object(s.jsx)("div",{className:"control",children:Object(s.jsx)("button",{"data-cy":"addButton",type:"button",className:"button is-primary",onClick:function(){return u(l)},children:"Add to the list"})})]})]}),l&&Object(s.jsxs)("div",{className:"container","data-cy":"previewContainer",children:[Object(s.jsx)("h2",{className:"title",children:"Preview"}),Object(s.jsx)(r,{movie:l})]})]})},f=function(){return Object(s.jsx)(v,{children:Object(s.jsxs)("div",{className:"page",children:[Object(s.jsx)("div",{className:"page-content",children:Object(s.jsx)(h,{})}),Object(s.jsx)("div",{className:"sidebar",children:Object(s.jsx)(x,{})})]})})};n.a.render(Object(s.jsx)(f,{}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.bfad39c3.chunk.js.map